{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,kBAC9BC,EAAmB,sBACnBC,EAAaH,SAASC,cAAc,uBACpCG,EAAkBJ,SAASC,cAAc,4BAG3CI,EAAO,GAEXN,EAAKO,iBAAiB,SAAS,EAAAT,EAAAU,WAKQ,SAAtBC,GACbH,EAAKG,EAAEC,OAAOC,MAAQF,EAAEC,OAAOE,MAE/BC,aAAaC,QAAQX,EACjBY,KAAKC,UAAU,CAAEC,MAAOX,EAAKW,MAAOC,QAASZ,EAAKY,U,GATT,MACjDlB,EAAKO,iBAAiB,UA2BtB,SAAmBE,GAEf,GADAA,EAAEU,iBACuB,KAArBf,EAAWQ,OAA0C,KAA1BP,EAAgBO,MAC3C,OAAOQ,MAAM,uBAGDC,QAARC,IAAI,CAAEL,MAAOb,EAAWQ,MAAOM,QAASb,EAAgBO,QAMhEN,EAAO,GACPO,aAAaU,WAAWpB,GACxBC,EAAWQ,MAAQ,GACrBP,EAAgBO,MAAQ,E,IAO1B,IAAMY,EArCO,SAAAC,GACT,IACI,IAAMC,EAAkBb,aAAac,QAAQF,GAEL,IAAnCC,EAAiB,OAEtB,OAAOX,KAAKa,MAAMF,E,CACpB,MAAOG,GAGL,YADqCR,QAA7BQ,MAAM,oBAAqBA,EAAMX,Q,EA4B7BY,CAAK3B,GACzB,GAAIqB,EAAa,CACb,IAAQO,EAA+CP,EAA/CP,MAAoBe,EAA2BR,EAA3BN,QAC5Bd,EAAWQ,MAAQmB,EACnB1B,EAAgBO,MAAQoB,C","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst form = document.querySelector('.feedback-form');\nconst LOCALSTORAGE_KEY = 'feedback-form-state';\nconst emailInput = document.querySelector('input[name=\"email\"]');\nconst messageTextarea = document.querySelector('textarea[name=\"message\"]');\n\n\nlet data = {};\n\nform.addEventListener('input', throttle(onInput, 500));\nform.addEventListener('submit', onSubmit);\n\n\n// додавання значення інпуту в локальне сховище\nfunction onInput(e) {\n    data[e.target.name] = e.target.value\n\n    localStorage.setItem(LOCALSTORAGE_KEY,\n        JSON.stringify({ email: data.email, message: data.message }));\n}\n\n// Метод load який абстрагує повторюваний код перевірки помилок\nconst load = key => {\n    try {\n        const serializedState = localStorage.getItem(key);\n        // перевіряю чи данні не порожні якщо так повертаю undefined\n        if (!serializedState) return undefined;\n\n        return JSON.parse(serializedState)\n    } catch (error) {\n        // повертається повідомлення підчас помилки\n        console.error('Get state error: ', error.message);\n        return undefined;\n    }\n};\n\n\nfunction onSubmit (e) {\n    e.preventDefault();\n    if (emailInput.value === '' || messageTextarea.value === '') {\n        return alert('Заповніть всі поля!');\n    }\n\n    console.log({ email: emailInput.value, message: messageTextarea.value });\n        clearForm();\n}\n\n\nfunction clearForm () {\n    data = {}\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n    emailInput.value = '';\n  messageTextarea.value = '';\n}\n\n// перевірка сховища \n\n//  заповнювати поля данними якщо в сховищі є данні\n\nconst storageData = load(LOCALSTORAGE_KEY);\nif (storageData) {\n    const { email: storedEmail, message: storedMessage } = storageData;\n    emailInput.value = storedEmail;\n    messageTextarea.value = storedMessage;\n}\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$LOCALSTORAGE_KEY","$b00c40859be242c5$var$emailInput","$b00c40859be242c5$var$messageTextarea","$b00c40859be242c5$var$data","addEventListener","throttle","e","target","name","value","localStorage","setItem","JSON","stringify","email","message","preventDefault","alert","console","log","removeItem","$b00c40859be242c5$var$storageData","key","serializedState","getItem","parse","error","$b00c40859be242c5$var$load","$b00c40859be242c5$var$storedEmail","$b00c40859be242c5$var$storedMessage"],"version":3,"file":"03-feedback.352b0764.js.map"}